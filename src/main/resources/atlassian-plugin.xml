<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
        <param  name="plugin-icon">images/pluginIcon.png</param>
        <param  name="plugin-logo">images/pluginLogo.png</param>
        <param  name="configure.url">plugins/servlet/teamserverConnect</param>
    </plugin-info>
    <web-resource   name="contrast-bamboo-plugin Configuration javascript" key="configuration.js" >
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <resource   name="contrast-bamboo-plugin.js" type="download" location="js/contrast-bamboo-plugin.js">
            <param  name="content-type" value="application/javascript"/>
        </resource>
        <context>atl.admin</context>
    </web-resource>
    <servlet    name="contrast-bamboo-plugin"   key="teamserver-config" class="com.contrastsecurity.ConnectionServlet">
        <url-pattern>/teamserverConnect</url-pattern>
    </servlet>
    <web-item   name="Contrast Admin Page"      key="bamboo-menu-item" section="system.admin/plugins" weight="10" application="bamboo">
        <description>Link to Contrast Teamserver Configuration page.</description>
        <label  key="Teamserver Profiles"/>
        <link   linkId="teamserver-admin-link">/plugins/servlet/teamserverConnect</link>
    </web-item>
    <rest       name="Teamserver REST Resource" key="contrast-rest" path="/teamserver-admin" version="1.0">
        <description>Provides REST resources for the Configuration UI.</description>
    </rest>
    <rest       name="contrastconfig" i18n-name-key="contrastconfig.name" key="contrastconfig" path="/contrastconfig" version="1.0">
        <description
            key="contrastconfig.description">The contrastconfig Plugin</description>
    </rest>
    <taskType   name="Contrast Vulnerability Threshold" key="teamserver-threshold-task" class="com.contrastsecurity.VerifyThresholdsTask">
        <description>A task for registering Teamserver results as build conditions.</description>
        <configuration class="com.contrastsecurity.TeamserverTaskConfiguration"/>
        <resource type="freemarker" name="edit" location="editTeamserverTask.ftl"/>
        <resource type="freemarker" name="view" location="viewTeamserverTask.ftl"/>
        <resource type="download"   name="icon" location="images/pluginLogo.png"/>
        <help link="ts.task.help.link" title="ts.task.help.title"/>
    </taskType>
    <resource   name="language" type="i18n" location="com.contrastsecurity.contrast-bamboo-plugin.i18n"/>
    <report     name="Teamserver Vulnerabilities by Type" key="teamserverVulnTracking" class="com.contrastsecurity.VulnReportCollector">
        <description>Shows the vulnerabilities in each build by type of vulnerability.</description>
        <chartClass>com.atlassian.bamboo.reports.charts.BuildSummarySuccessRatioLineChart</chartClass>
    </report>
    <report     name="Teamserver Vulnerabilities by Severity" key="teamserverSevTracking" class="com.contrastsecurity.SeverityReportCollector">
        <description>Shows the vulnerabilities in each build by severity (Note, Low, Medium, High, Critical).</description>
        <chartClass>com.atlassian.bamboo.reports.charts.BuildSummarySuccessRatioLineChart</chartClass>
    </report>
</atlassian-plugin>
